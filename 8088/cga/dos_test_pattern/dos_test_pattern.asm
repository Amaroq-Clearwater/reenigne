org 0x100
cpu 8086

  mov ax,6
  int 0x10

  mov ax,0xb800
  mov es,ax
  xor di,di
  cld
  mov cx,200
yLoopTop:
  push cx
  mov cx,16
  mov al,0
barLoopTop:
  push cx
  mov cx,5
  rep stosb
  pop cx
  add al,0x11
  loop barLoopTop
  add di,0x2000 - 80
  cmp di,0x4000
  jle pageOk
  add di,80 - 0x4000
pageOk:
  pop cx
  loop yLoopTop

  mov ax,cs
  mov ds,ax
  mov si,data

paletteLoop:
  mov ah,0
  int 0x16
  cmp al,27
  jne noExit

  mov ax,0x4c00
  int 0x21
noExit:

  mov dx,0x3d8
  lodsw
  out dx,ax
  cmp si,endData
  jne notAtEnd
  mov si,data
notAtEnd:
  jmp paletteLoop

data:
  dw 0x001a, 0x011a, 0x021a, 0x031a, 0x041a, 0x051a, 0x061a, 0x071a, 0x081a, 0x091a, 0x0a1a, 0x0b1a, 0x0c1a, 0x0d1a, 0x0e1a, 0x0f1a
  dw 0x000a, 0x010a, 0x020a, 0x030a, 0x040a, 0x050a, 0x060a, 0x070a, 0x080a, 0x090a, 0x0a0a, 0x0b0a, 0x0c0a, 0x0d0a, 0x0e0a, 0x0f0a
  dw 0x100a, 0x110a, 0x120a, 0x130a, 0x140a, 0x150a, 0x160a, 0x170a, 0x180a, 0x190a, 0x1a0a, 0x1b0a, 0x1c0a, 0x1d0a, 0x1e0a, 0x1f0a
  dw 0x200a, 0x210a, 0x220a, 0x230a, 0x240a, 0x250a, 0x260a, 0x270a, 0x280a, 0x290a, 0x2a0a, 0x2b0a, 0x2c0a, 0x2d0a, 0x2e0a, 0x2f0a
  dw 0x300a, 0x310a, 0x320a, 0x330a, 0x340a, 0x350a, 0x360a, 0x370a, 0x380a, 0x390a, 0x3a0a, 0x3b0a, 0x3c0a, 0x3d0a, 0x3e0a, 0x3f0a
endData:
